# Linux学习

[TOC]

## Linux基础命令

命令格式：

```shell
command [-options] [parameters] 
```

绝对路径：从根目录开始

相对路径：从当前目录开始

两种路径贯穿在大多数命令当中

### ls 命令

**查看目录下的文件和文件夹**

- `ls` ：查看当前目录

  `ls /root`：查看指定目录

  `ls /root /home`：同时查看多个目录

- `-a` ：all，所有、

  `ls -a`：all，查看当前目录下隐藏和非隐藏的文件和文件夹

  `ls -a /home`：查看指定目录的所有文件和文件夹

- `-l` ：list，列表显示

  `ls -l` ：可简写为` ll `，以列表形式显示文件和文件夹

  `ls -l /home`：列表形式，指定目录

- `-h` ：显示大小，带单位，必须与`-l`结合使用

  `ls -lh` ：以列表形式显示当前目录下的文件和文件夹，并带单位显示大小



### pwd 命令

**显示当前目录所在的绝对路径**



### cd 命令

**change directory，切换目录**

- `cd`：回到用户家目录

  `cd 目录`：切换到指定目录

  `cd ..` ：回到上一级目录

  `cd -` ：在最近的两个目录间切换



### mkdir 命令

**make directory，创建文件夹**

Linux区分大小写

- `mkdir 文件夹名`：在当前目录下创建

  `mkdir /root/test2`：在绝对路径下创建文件夹

- `-p`：创建前置路径，即递归创建多个层级的文件夹

  `mkdir /test/test1/test2/test3`



### rm 命令

**remove，删除文件或目录**

- `rm a.txt`：删除文件，会有提示

- `-r`：递归，配合rm可删除文件夹

  `rm -r /test`，如果删除的文件夹里有其他文件夹和文件，则会先进入最里的文件夹开始提示是否删除文件

- `-f` ：force，强制，无提示

  `rm -f a.txt` ：强制删除文件且无提示



### touch 命令

**创建空文件**

- `touch 文件名`：当前目录创建

  `touch /root a.txt`：绝对路径创建



### mv 命令

**move，剪切+粘贴，用于文件、目录的移动和重命名**

- `mv a.txt b.txt`：会提示是否覆盖，如果覆盖则是重命名

  无论b.txt不存在或存在，都是重命名

- `mv test1 test2` ：

  当test2存在：即将test1移动到test2中

  当test2不存在：重命名test1

- `mv a.txt test1`：移动文件到指定目录



### cat 命令

**查看文件内容**



### more 命令

**查看文件部分内容，按Enter出现一行，按空格出现一页，B返回首页，Q退出**



### cp 命令

**copy，复制+粘贴**

- `cp a.txt b.txt`：将文件内容覆盖

  当b不存在：先创建b，将a的内容复制，然后覆盖到b中

  当b存在：将a的内容覆盖到b中

- -r：复制文件夹，`cp -r test1 test2`：

  当test2存在，将test1文件夹整个复制一份，写入到test2中

  当test2不存在，创建test2，将test1文件夹中的内容复制一份写入到test2中

- `cp a.txt test2`：复制文件写入到文件夹中



### ps 命令

**process status，进程状态**，可查看PID等信息

- `ps -ef`：查看当前正在运行的进程

- uid：进程发起者

  pid：进程ID

  ppid：父进程ID



-- -- -- --

### kill 命令

**终止进程**

- `kill pid`：终止对应PID的进程，不一定能终止，比如终止不了带有保护进程的进程
- `kill -9 pid`：杀死对应进程，一定能杀死进程
- `kill -l`：查看kill命令的所有信号



### ifconfig 命令

**查看虚拟机的网络配置信息**

- windows：ipconfig



### clear 命令

**清屏，快捷键ctrl+l**



### history 命令

查看历史命令，默认1000行



### 重启关机命令

- `reboot`：重启
- `shutdown -h now`：立即关机
- `halt`：不断电关机



### hostname 命令

**查看主机名称**



### tar 命令

**压缩、打包、解包、解压缩**

- `-c`：小写c，打包

- `-v`：view，查看过程

- `-f`：file，打包成指定文件

- `-z`：操作压缩格式的文件，gzip格式

- `-x`：解包，解压缩包

- `-C`：大写C，解包到指定目录

  ```shell
  tar -cvf test1.tar test1   --  将test1文件夹打包成test1.tar文件并查看打包过程
  
  tar -czvf test1.tar.gz test1  -- 打包并压缩
  
  tar -xvf test1.tar -C /bigdata_xiao/test2  -- 解包到指定目录
  
  tar -xzvf test1.tar.gz -C /bigdata_xiao/test3  -- 解压缩包
  ```



### grep 命令

**全文检索命令，可以用于过滤内容和检索关键字**

- `-i`：不区分大小写
- `-r`：递归

```shell
grep 检索关键字 文件路径（文件路径可作为内容输入端口，可通过管道输入内容）

grep hadoop a.txt  -- 在a.txt中检索包含Hadoop的内容

grep -ir hadoop /root  -- 在目标目录中遍历查找包含关键字的内容
```



### 管道命令|

**|：将上一个命令的输入当做下一个命令的输出**

```shell
-- 只要上一个命令有输出，管道都可以将输出结果传给下一个命令的输入

ps -ef | grep mysql  -- 在正在运行的进程中查找mysql
```



### which 命令

**查看执行命令的位置**



### vi编辑器

**文本编辑器，只能编辑文本内容，不能进行排版，不支持鼠标操作，没有菜单，只有命令**

- 命令模式：初始进入该模式，有如下命令

  o：在当前行下方插入一空行

  O：在当前行前面插入一空行

  dd：删除光标所在行

  ndd：从光标位置向下连续删除 n 行

  yy：复制光标所在行

  nyy：从光标位置向下连续复制n行

  p：粘贴

  u：撤销上一次命令

  gg：回到文件顶部

  G：回到文件末尾

  /str：查找str

- 编辑模式：从命令模式输入“ i、o、O、a、s ”都可以进入该模式，从编辑模式按“ Esc ”进入命令模式

- 末行模式：从命令模式同时按“shift“ + ” : ”进入该模式，从末行模式按“回车，退格，del”都可以进入命令模式，末行模式无法直接进入编辑模式

  w：保存

  w 文件名：另存为其他文件名

  q：退出，在没有修改的情况下

  q!：强制退出不保存

  wq：保存退出



### useradd 命令

**创建/添加用户，只能root用户使用**

```shell
useradd 用户名  -- 添加一个普通用户
passwd 用户名  -- 更改用户密码
userdel -r 用户名  -- 删除一个普通用户，不加-r的话删除得不干净
su 用户名  -- 切换用户
```

 

### chmod 命令

`drwxr-xr-x. 3 root root  33 3月   3 14:02 test1`

| d               | rwx                                 | r-x                 | r-x                     | root   | root   | 33               | 3月   3 14:02 | test1  |
| --------------- | ----------------------------------- | ------------------- | ----------------------- | ------ | ------ | ---------------- | ------------- | ------ |
| 第1列：文件属性 | 第2-4列：创建者对文件或者目录的权限 | 第5-7列：用户组权限 | 第8-10 列：其他用户权限 | 创建者 | 用户组 | 文件大小（Byte） | 日期时间      | 文件名 |

- 角色

  创建者：一个文件或者文件夹的创建者（拥有者），userid ->  uid -> u

  用户组：针对一个文件或者文件夹而言，默认与创建者同名，groupid -> gid -> g

  其他用户：创建者之外的用户，other -> o

- 权限

  r：read，读权限，r == 4

  w：write，写权限，w == 2

  x：execute，执行权限，x == 1

- 权限操作：chmod，change mode

  ```shell
  -- 用字母
  chmod g-w 文件名  -- 对指定文件剥夺用户组的读权限
  chmod g+wx 文件名  -- 对指定文件添加用户组的写和执行权限
  chmod o=rwx 文件名  -- 对指定文件添加所有权限
  
  -- 用数字，使用数字权限时要写三位数字，因为7==007
  chmod 707 文件名 -- 对文件添加创建者和其他用户的所有权限，并剥夺用户组的所有权限
  chmod 777 文件名 -- 对文件添加所有用户的所有权限
  ```

